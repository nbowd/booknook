(this.webpackJsonpbooknook=this.webpackJsonpbooknook||[]).push([[0],{12:function(e,t,s){},23:function(e,t,s){},31:function(e,t,s){},32:function(e,t,s){},33:function(e,t,s){},70:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(7),c=s.n(r),o=(s(31),s(3)),i=(s(32),s(33),s(1));var l=function(){return Object(i.jsxs)("div",{className:"welcome",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{className:"welcome-title",children:"Welcome to Booknook!"}),Object(i.jsx)("p",{children:"Unique book recommendations for dozens of subjects"})]}),Object(i.jsxs)("div",{className:"get-started",children:[Object(i.jsx)("p",{children:"Getting Started:"}),Object(i.jsxs)("ul",{children:[Object(i.jsx)("li",{children:"Type or scroll through the subjects list"}),Object(i.jsx)("li",{children:"Click 'Find Books' to get results"}),Object(i.jsx)("li",{children:"Click 'More Info' to see a book description, shopping link, and save options"})]})]}),Object(i.jsx)("div",{children:"Register an account to save a book for later. While logged in, click 'Saved Books' to view/delete the user's saved selections."})]})},u=s(2),d=s.n(u),j=s(5),b=(s(12),s(26));var v=function(e){var t=e.options,s=e.handleChange;return Object(i.jsx)(b.a,{className:"search-bar",menuPortalTarget:document.body,options:t,onChange:s})};var m=function(e){var t=e.message,s=e.className,n=e.onClick;return Object(i.jsx)("button",{className:s,onClick:n,children:t})},p=s(6),h=s.n(p),O={Fantasy:12442,"Science Fiction":15253,"Action & Adventure":1650,Mystery:4785,Horror:1775,Thriller:2059,"Historical Fiction":6844,Romance:19733,Magic:13930,"Graphic Novels":9748,"Short Story":1507,Juvenile:2369,Autobiography:2983,Biography:622100,Cooking:24697,Art:65208,"Self-help":3799,History:1639606,"True Crime":1138,Humor:20240,Essays:3603,Humanities:3560,Parenting:8174,Science:68592};var x=function(e){var t=e.setResults,s=e.user,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],l=r[1],u=[];Object.keys(O).forEach((function(e){u.push({value:e.toLocaleLowerCase().replaceAll(" ","_"),label:e})}));var b=function(){var e=Object(j.a)(d.a.mark((function e(){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,h.a.get("/api/books",{params:{subject:c.value,amount:O[c.label]}});case 4:s=e.sent,t(s.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/users/".concat(s.id),{params:{id:s.id}});case 2:(n=e.sent)&&t(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"search",children:[Object(i.jsxs)("div",{className:"search-bar-title",children:[Object(i.jsx)("h2",{children:"Select a Subject:"}),Object(i.jsx)(v,{options:u,handleChange:function(e){l(e)}})]}),Object(i.jsx)(m,{className:"search-button",onClick:b,message:"Find Books"}),s?Object(i.jsx)(m,{className:"search-button find-books",message:"Saved Books",onClick:p}):null]})},f=(s(23),s(70),s(24)),g=s.n(f);var k=function(e){var t=e.description;return Object(i.jsxs)("div",{className:"desc",children:[Object(i.jsx)("div",{className:"description__heading",children:Object(i.jsx)("h4",{children:"Description:"})}),Object(i.jsx)("div",{style:{display:"table"},children:t?Object(i.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(i.jsx)(g.a,{className:"description",rows:2,maxRows:15,readOnly:!0,value:t})}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"skeleton skeleton-text"}),Object(i.jsx)("div",{className:"skeleton skeleton-text"}),Object(i.jsx)("div",{className:"skeleton skeleton-text"}),Object(i.jsx)("div",{className:"skeleton skeleton-text"})]})})]})};var N=function(e){var t=e.open,s=e.close,n=e.props;if(!t)return null;var a=n.title,r=n.author,c=n.cover,o=n.link,l=n.description,u=n.key,b=n.token,v=n.isSaved,p=n.id,O=n.results,x=n.setResults,f=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/saved",{title:a,author:r,cover:c,link:o,description:l,key:u},N);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Delete this entry?")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.a.delete("/api/saved/".concat(p),N);case 5:x(O.filter((function(e){return e.id!==p})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N={headers:{Authorization:"bearer ".concat(b?b.token?b.token:b:null)}};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"overlay",onClick:s}),Object(i.jsxs)("div",{className:"modal",children:[Object(i.jsx)("div",{className:"cover",children:Object(i.jsx)("img",{src:c,alt:"book cover",className:"cover__full"})}),Object(i.jsxs)("div",{className:"info",children:[Object(i.jsxs)("div",{className:"heading",children:[Object(i.jsx)("h2",{className:"card__title modal__title",children:a}),Object(i.jsx)("h3",{className:"card__author modal__author",children:r})]}),Object(i.jsx)("div",{className:"modal-body",children:Object(i.jsx)(k,{description:l})}),Object(i.jsxs)("div",{children:[o?Object(i.jsx)("a",{className:"shop-link",title:o,href:o,target:"_blank",rel:"no noreferrer",children:"Purchase"}):null,l&&b?v?Object(i.jsx)(m,{className:"shop-link",onClick:function(){return g()},message:"Delete"}):Object(i.jsx)(m,{className:"shop-link",onClick:function(){return f()},message:"Save"}):null]}),Object(i.jsx)(m,{className:"close-modal",onClick:s,message:"\xd7"})]})]})]})},w=(s(78),s.p+"static/media/default_book_cover.eca8f2f5.jpeg");var y=function(e){var t=e.result,s=e.results,a=e.setResults,r=e.token,c=t.cover,l=t.title,u=t.author,b=t.description,v=t.link,p=t.id,O=Object(n.useState)(!1),x=Object(o.a)(O,2),f=x[0],g=x[1],k=Object(n.useState)({}),y=Object(o.a)(k,2),S=y[0],_=y[1],C=Object(n.useState)(c),R=Object(o.a)(C,2),B=R[0],P=R[1],T=t.key,F=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_({author:u,title:l,description:b||null,link:v||null,cover:c||w,token:r,id:p,results:s,setResults:a,key:T,isSaved:!!b}),g(!0),!b){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,h.a.get("/api/book",{params:{id:T,title:l,author:u}});case 6:t=e.sent,_({author:u,title:l,cover:function(){return c||(t.data.cover?(P(t.data.cover),t.data.cover):w)}(),description:U(t.data.bookDetails),link:t.data.vendor,token:r,id:p,results:s,setResults:a,key:T,isSaved:!1});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();f?document.body.classList.add("active-modal"):document.body.classList.remove("active-modal");var U=function(e){return e.description?e.description.value?e.description.value:e.description:"No Description Found"};return Object(i.jsxs)("div",{className:"card",children:[Object(i.jsxs)("div",{className:"card__body",children:[Object(i.jsx)("div",{className:"card__img-bg",children:Object(i.jsx)("img",{src:B||w,alt:"Cover for the book",className:"card__img"})}),Object(i.jsxs)("div",{className:"card__text",children:[Object(i.jsx)("h2",{className:"card__title",children:l}),Object(i.jsx)("h3",{className:"card__author",children:u})]})]}),Object(i.jsx)(m,{onClick:F,className:"card__button",message:"More Info"}),Object(i.jsx)(N,{props:S,open:f,close:function(){return g(!1)}})]})};var S=function(e){var t=e.results,s=e.setResults,n=e.token;return Object(i.jsx)("div",{className:"wrapper",children:t.map((function(e){return Object(i.jsx)(y,{result:e,results:t,setResults:s,token:n},e.key)}))})},_=function(){var e=Object(j.a)(d.a.mark((function e(t){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/api/login",t);case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={login:_},R=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:"error",children:t})};var B=function(e){var t=e.open,s=e.close,a=e.props,r=a.email,c=a.setEmail,l=a.username,u=a.setUsername,b=a.password,v=a.setPassword,p=a.modalType,O=a.setToken,x=a.setUser,f=Object(n.useState)(""),g=Object(o.a)(f,2),k=g[0],N=g[1],w=Object(n.useState)(null),y=Object(o.a)(w,2),S=y[0],_=y[1];if(!t)return null;var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;_("".concat(e)),setTimeout((function(){_(null)}),t)},P=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b===k){e.next=5;break}B("Passwords do not match"),e.next=15;break;case 5:return e.prev=5,e.next=8,h.a.post("/api/users",{email:r,username:l,password:b});case 8:return e.next=10,T();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),B(e.t0.response.data.error);case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(d.a.mark((function e(){var t,s,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=n.length>0&&void 0!==n[0]?n[0]:null)?t.preventDefault():t=null,e.prev=2,e.next=5,C.login({email:r,password:b});case 5:s=e.sent,window.localStorage.setItem("loggedBookappUser",JSON.stringify(s)),O(s),x(s),c(""),v(""),u(""),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),B("Invalid Login Credentials");case 17:console.log("logging in to",r);case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"overlay",onClick:function(){c(""),v(""),u(""),N(""),_(null),s()}}),Object(i.jsxs)("div",{className:"modal",id:"login-modal",children:[Object(i.jsxs)("div",{className:"login-info",children:[Object(i.jsx)("div",{className:"heading",id:"login-heading",children:p}),Object(i.jsx)("div",{className:"login-form",children:Object(i.jsxs)("form",{onSubmit:"Login"===p?T:P,children:[Object(i.jsxs)("div",{children:["Email",Object(i.jsx)("input",{type:"email",value:r,name:"email",onChange:function(e){var t=e.target;return c(t.value)}})]}),"Register"===p?Object(i.jsxs)("div",{children:["Username",Object(i.jsx)("input",{type:"text",value:l,name:"username",onChange:function(e){var t=e.target;return u(t.value)}})]}):null,Object(i.jsxs)("div",{children:["Password",Object(i.jsx)("input",{type:"password",value:b,name:"Password",onChange:function(e){var t=e.target;return v(t.value)}})]}),"Register"===p?Object(i.jsxs)("div",{children:["Re-enter Password",Object(i.jsx)("input",{type:"password",value:k,name:"Password",onChange:function(e){var t=e.target;return N(t.value)}})]}):null,Object(i.jsx)("div",{className:"errorMsg",children:Object(i.jsx)(R,{message:S,style:{color:"green"}})}),Object(i.jsx)("button",{id:"login-modal-btn",className:"login-btns",type:"submit",children:p})]})})]}),Object(i.jsx)(m,{className:"close-modal",id:"login-close",onClick:s,message:"\xd7"})]})]})};var P=function(e){var t=e.props,s=t.setEmail,a=t.setPassword,r=t.setUser,c=t.setToken,l=t.setResults,u=t.user,d=Object(n.useState)(!1),j=Object(o.a)(d,2),b=j[0],v=j[1],p=Object(n.useState)(null),h=Object(o.a)(p,2),O=h[0],x=h[1];return t.modalType=O,Object(i.jsxs)("div",{className:"user-info",children:[Object(i.jsx)("h3",{className:"login-status",children:u?"Welcome, ".concat(u.username):"Not Logged In"}),u?Object(i.jsx)(m,{className:"login-btns",message:"Sign Out",onClick:function(){return s(""),a(""),r(null),c(null),l(null),window.localStorage.removeItem("loggedBookappUser"),void v(!1)}}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m,{className:"login-btns",message:"Sign In",onClick:function(){x("Login"),v(!0)}}),Object(i.jsx)(m,{className:"login-btns",message:"Register",onClick:function(){x("Register"),v(!0)}}),Object(i.jsx)(B,{open:b,close:function(){return v(!1)},props:t})]})]})},T=s(25);var F=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),s=t[0],a=t[1],r=Object(n.useState)(""),c=Object(o.a)(r,2),u=c[0],d=c[1],j=Object(n.useState)(""),b=Object(o.a)(j,2),v=b[0],m=b[1],p=Object(n.useState)(""),h=Object(o.a)(p,2),O=h[0],f=h[1],g=Object(n.useState)(null),k=Object(o.a)(g,2),N=k[0],w=k[1],y=Object(n.useState)(null),_=Object(o.a)(y,2),C=_[0],R=_[1],B={email:u,setEmail:d,username:v,setUsername:m,password:O,setPassword:f,setUser:w,setToken:R,user:N,setResults:a};return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedBookappUser");if(!e)return null;var t=JSON.parse(e),s=Object(T.a)(t.token),n=new Date;1e3*s.exp>n.getTime()&&(w(t),R(t.token))}),[]),Object(i.jsxs)("div",{id:"app",children:[Object(i.jsxs)("div",{className:"intro",children:[Object(i.jsx)("h1",{className:"title",children:"Booknook"}),Object(i.jsx)(x,{setResults:a,user:N})]}),Object(i.jsx)(P,{props:B}),s?Object(i.jsx)(S,{token:C,results:s,setResults:a}):Object(i.jsx)(l,{})]})};c.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)("div",{children:Object(i.jsx)(F,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.09597c6d.chunk.js.map